{
  "Imports" : [
    {"imp" : "connection.ReceiverConnection"},
    {"imp" : "connection.SenderConnection"},
    {"imp" : "org.json.simple.JSONObject"},
    {"imp" : "java.io.ByteArrayInputStream"},
    {"imp" : "java.io.IOException"},
    {"imp" : "java.io.ObjectInputStream"},
    {"imp" : "java.net.DatagramPacket"},
    {"imp" : "java.net.SocketException"}
    ],
  "class" : "MiddlewareHorizontalSkeleton",
  "className" : "horizontal",
  "extends" : "SenderConnection",
  "InnerClasses" : [
    {"name" : "listenerBrokerAndActionPerformer",
    "extends" : "ReceiverConnection",
    "implements" : "Runnable"},
    {"name" : "listenerRobotAndRegisterNameService",
      "extends" : "ReceiverConnection",
      "implements" : "Runnable"}
  ],
  "Methods" : [
    {"type" : "private",
    "return" : "void",
    "name" : "unmarshalling",
    "parameters" : [
      {"type" : "JSONObject",
      "name" : "object"}
    ],
    "throws" : "IOException"},
    {"type" : "private",
      "return" : "void",
      "name" : "sendMessage",
      "parameters" : [
        {"type" : "String",
          "name" : "msg"},
        {"type" : "String",
          "name" : "ip"}
      ],
      "throws" : "IOException"},
    {"type" : "private",
      "return" : "void",
      "name" : "nameServiceRegister",
      "parameters" : [
        {"type" : "String",
          "name" : "ip"}
      ],
      "throws" : "IOException"}
  ],
  "NameServer" : [
    {"option" : "substring",
      "option1" : "7",
      "option2" : "20",
    "function1" : "doSenderConnection",
    "function2" : "sendMessage",
    "option3" : "7788",
    "ip" : "ip"}
  ],
  "Threads" : [
    {"t" : "Thread",
    "s" : "start"}
  ],
  "sendMessage" : [
    {"function1" : "doSenderConnection",
      "function2" : "sendMessage",
      "option1" : "msg",
      "option2" : "7797",
      "ip" : "ip"}
  ],
  "unmarshalling" :[
    {
      "variables": [
        {
          "type": "String",
          "name": "move",
          "functionExtension": "get"
        },
        {
          "type": "String",
          "name": "orientation",
          "functionExtension": "get"
        },
        {
          "type": "int",
          "name": "value",
          "functionExtension": "get"
        },
        {
          "type": "String",
          "name": "ip",
          "functionExtension": "get"
        },
        {
          "type": "String",
          "name": "msg",
          "functionExtension": "append"
        }
      ]
    }
  ],
  "constructorStub" : [
    {"function1" : "doReceiverConnection",
    "port" : "7789",
      "exception" : "SocketException e",
    "error" : "[ERROR] - Couldn't create socket"}
  ],
  "RunJSON" : [
    {"o" : "@Override",
      "return" : "void",
      "name" : "run",
      "cicle" : "while",
      "option" : "true",
      "var1Type" : "DatagramPacket",
      "var1Name" : "packet",
      "var2Type" : "ObjectInputStream",
      "var2Name" : "iStream",
      "var3Type" : "ByteArrayInputStream",
      "option1" : "buf",
      "option2" : "length",
      "s" : "socket",
      "function3" : "receive",
      "function" : "unmarshalling",
      "cast" : "(JSONObject)",
      "function1" : "readObject",
      "function2" : "close",
      "excep" : "IOException | ClassNotFoundException e"}
  ],
  "constructorRobot" : [
    {"function1" : "doReceiverConnection",
      "port" : "7794",
      "exception" : "SocketException e",
      "error" : "[ERROR] - Couldn't create socket"}
  ],
  "RunRobot" : [
    {"o" : "@Override",
    "return" : "void",
    "name" : "run",
    "cicle" : "while",
    "option" : "true",
    "var1Type" : "DatagramPacket",
    "var1Name" : "packet",
    "option1" : "buf",
    "option2" : "length",
    "s" : "socket",
      "function" : "receive",
    "var2Type" : "String",
    "var2Name" : "ip",
    "option3" : "getData",
    "excep" : "IOException e"}
  ],
  "BrokerIP" : [{
    "type": "private",
    "typeV": "String",
    "name": "brokerIP",
    "init": "\"localhost\""}
  ],
  "brokerSetter" : [{
    "return" : "void",
    "name" : "setBrokerIP",
    "argType" : "String",
    "argName" : "brokerPort"}
  ],
  "ifArgs" : [{
    "if" : "if",
    "args" : "args",
    "function" : "length",
    "equal" : "0",
    "function1" : "System.out.println",
    "message" : "\"Usage: java MiddlewareHorizontalSkeleton <broker ip>\"",
    "function2" : "System.exit"
  }
  ]
}